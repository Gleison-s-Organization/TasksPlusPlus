<!DOCTYPE html>
<html lang="pt-br">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Tasks++ üè† Home</title>
    <meta property="og:image" itemprop="image" content="assets/icons/logo-share.jpg" />
    <meta property="og:type" content="website" />
    <link rel="stylesheet" href="styles/base.css" />    
    <link rel="stylesheet" href="styles/component.css" />
    <link rel="stylesheet" href="styles/keyframes.css" />
    <link rel="stylesheet" href="styles/global.css" />
    <link rel="stylesheet" href="styles/layout.css" />
    <link rel="stylesheet" href="styles/media-query.css" />  
    <link rel="stylesheet" href="styles.css">      
    <script src="scripts/global.js"></script>
    <script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
  </head>
    <body>
      <div class="container">
        <div class="mobile-only">
          <div class="l-sidenav js-side-nav">
            <a class="c-sidenav__close-button js-close-button">&times;</a>

            <div id="userInfo" class="c-user-info">
              <img class="c-user-info__avatar" src="assets/img/tony-stark.png" alt="" />
              <span class="c-user-info__name">
                <strong>Carol Danvers</strong>
              </span>
              <button id="buttonLogout" class="c-user-info__button js-button-logout">Sair</button>
            </div>

            <nav class="c-sidenav">
              <a class="c-sidenav__link" 
              onclick="loadPage('pages/home/_home.html')">Home</a>
              <a class="c-sidenav__link" 
              onclick="loadPage('pages/atividades/atividades.html')">Atividades</a>
              <a class="c-sidenav__link" 
              onclick="loadPage('pages/estatisticas/estatisticas.html')">Estat√≠sticas</a>
              <a class="c-sidenav__link" 
              onclick="loadPage('pages/ajuda/ajuda.html')">Ajuda</a>
              <a class="c-sidenav__link" 
              onclick="loadPage('pages/sobre/sobre.html')">Sobre</a>
              <a class="c-sidenav__link c-sidenav__link--danger" 
              onclick="loadPage('pages/login-cadastro/login-cadastro.html')"
                >Desconectar</a
              >
            </nav>
          </div>
        </div>

        <header class="l-header">
          <nav class="l-header__nav" id="navBar">
            <ul class="c-menu-list">
              <li class="c-menu-item mobile-only">
                <a class="c-menu-link"                 
                href="javascript:void" onclick="loadPage('pages/home/_home.html')"
                >
                  <img class="c-menu-logo" src="assets/img/logo.png" alt="" />
                </a>
              </li>
              <li class="c-menu-item not-mobile">
                <a 
                class="c-menu-link c-menu-link--selected" 
                href="javascript:void" onclick="loadPage('pages/home/_home.html')"
                >
                Home
              </a>
              </li>
              <li class="c-menu-item not-mobile">
                <a 
                class="c-menu-link" 
                href="javascript:void" onclick="loadPage('pages/atividades/atividades.html')"
                >
                Atividades
              </a>
              </li>
              <li class="c-menu-item not-mobile">
                <a 
                class="c-menu-link"
                href="javascript:void" onclick="loadPage('pages/estatisticas/estatisticas.html')"
                >
                Estat√≠sticas
              </a>
              </li>
              <li class="c-menu-item not-mobile">
                <a 
                class="c-menu-link"                 
                href="javascript:void" onclick="loadPage('pages/ajuda/ajuda.html')"
                >
                Ajuda
              </a>
              </li>
              <li class="c-menu-item not-mobile">
                <a 
                class="c-menu-link"                 
                href="javascript:void" onclick="loadPage('pages/sobre/sobre.html')"
                >
                Sobre
              </a>
              </li>
              <li class="not-mobile">
                <button
                  class="user-profile-icon"
                  style="background-color: transparent; margin-right: 25px"
                  onclick="openUserInfo()"
                >
                  <img style="width: 30px; height: 26px" src="assets/icons/logged-off.svg" />
                </button>
                <div id="userInfo" class="c-user-info js-user-info">
                  <img class="c-user-info__avatar" src="assets/img/tony-stark.png" alt="" />
                  <span class="c-user-info__name">
                    <strong>Carol Danvers</strong>
                  </span>
                  <button id="buttonLogout" class="c-user-info__button js-button-logout">Sair</button>
                </div>
              </li>
              <li class="c-menu-item mobile-only">
                <button class="c-menu__button js-menu-button">
                  <svg class="c-menu__button__svg" viewBox="0 0 100 80" width="40" height="40">
                    <rect width="100" height="20" rx="8"></rect>
                    <rect y="30" width="100" height="20" rx="8"></rect>
                    <rect y="60" width="100" height="20" rx="8"></rect>
                  </svg>
                </button>
              </li>
            </ul>
          </nav>
        </header>
        <div id="content"></div>
        <div id="script"></div>
        <div id="style"></div>
      </div>
    </body>
    <script>
      function loadPage(url) {
        var request = new XMLHttpRequest();
        const urlSplit = url.split('/');
        const urlScript = urlSplit.filter((_,index) => index < (urlSplit.length - 1)).join('/')+'/script.js';        
        const urlCss = urlSplit.filter((_,index) => index < (urlSplit.length - 1)).join('/')+'/styles.css';


        request.open("GET", url, true);
        request.responseType = "text/html";
        request.onload = function (e) {
          var data = request.response;
                       
          const script = document.createElement('script');
          script.src = urlScript;


          const style =document.createElement("link")
          style.setAttribute("rel", "stylesheet")
          style.setAttribute("type", "text/css")
          style.setAttribute("href", urlCss)
          style.onload = function() {
            document.querySelector("#content").innerHTML = data; 
            document.querySelector('#script').appendChild(script);    
          };
          document.querySelector('#style').appendChild(style);
        };
        request.send();
      }    
      setTimeout(() => {
        loadPage("pages/home/_home.html")
      }, 500);
      // history.pushState("", "", "/home");
    </script>
  </html>
</html>
